"use strict";(globalThis.webpackChunkkether_pl=globalThis.webpackChunkkether_pl||[]).push([[250],{6291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(3246),s=n(2692),i=n(5579),o=n(405),r=n(2967),d=n(1195),c=n(553),m=n(1287),l=n(9556),p=n(5474),u=n(9035);const h={maxAttempts:3,initialDelay:1e3,maxDelay:1e4,backoffMultiplier:2,retryCondition:p.$d};async function g(e,t={},n){const a={...h,...t};let s,i=a.initialDelay;for(let r=1;r<=a.maxAttempts;r++)try{return{success:!0,data:await e(),attempts:r}}catch(o){const e=(0,p.KR)(o,p.By.UNKNOWN,p.MU.MEDIUM,{...n,attempt:r});s=e,u.A.logErrorWithRetry(o,{...n,attempt:r},r-1);if(!(r<a.maxAttempts&&(!a.retryCondition||a.retryCondition(e))))break;a.onRetry&&a.onRetry(r,e),r<a.maxAttempts&&(await C(i),i=Math.min(i*a.backoffMultiplier,a.maxDelay))}return{success:!1,error:s,attempts:a.maxAttempts}}function C(e){return new Promise(t=>setTimeout(t,e))}const f=()=>{const e=(0,s.d4)(e=>e.serverInfoReducer.serverInfo),t=(0,i.useRef)(!1);(0,i.useEffect)(()=>{e||t.current||b(e,t);const n=setInterval(()=>{t.current||b(e,t)},l.i3.REFRESH_INTERVAL_MS);return()=>{clearInterval(n)}},[e])},b=async(e,t)=>{t.current=!0;const n=await g(async()=>(await c.A.get(o.Y.SERVER_INFO,{timeout:l.i3.DEFAULT_TIMEOUT_MS})).data,{maxAttempts:3,initialDelay:1e3,retryCondition:e=>e.type===p.By.NETWORK||e.type===p.By.SERVER&&500!==e.code},{component:"ServerInfoService",action:"fetch_server_info"});try{if(n.success&&n.data){const e=n.data;e.status=Object.keys(e).length>0?"1":"0",r.j.dispatch(d.n.setServerInfo(e))}else if(n.error){u.A.logError(n.error,{component:"ServerInfoService",action:"fetch_server_info",attempts:n.attempts},n.error.type,n.error.severity);const e=(0,p.Qk)(n.error);m.t.ERROR(e);const t={name:"Kether.pl",map:"\u2013",players:"0",maxplayers:"0",bots:0,playerdetails:[],status:"0"};r.j.dispatch(d.n.setServerInfo(t))}}finally{t.current=!1}};var x=n(2492),j=n(5910),y=n(965),v=n(8171);const R=(0,y.sC)(function(){const e=(0,s.d4)(e=>e.serverInfoReducer.serverInfo);f();const t=(0,i.useCallback)(e=>{const t=~~(e/3600),n=~~(e%3600/60),a=~~e%60;let s="";return t>0&&(s+=t+":"+(n<10?"0":"")),s+=n+":"+(a<10?"0":""),s+=""+a,s},[]),n=(0,i.useCallback)(e=>(0,v.jsx)("span",{children:t(e.duration)}),[t]),o=(0,i.useCallback)(()=>{var t;return null!==e&&void 0!==e&&null!==(t=e.playerdetails)&&void 0!==t&&t.length?(0,v.jsx)("div",{className:"player-list-table",children:(0,v.jsxs)(x.b,{value:e.playerdetails,removableSort:!0,sortMode:"multiple",scrollable:!0,children:[(0,v.jsx)(j.V,{field:"name",header:"Nickname",sortable:!0}),(0,v.jsx)(j.V,{field:"score",header:"Score",sortable:!0}),(0,v.jsx)(j.V,{body:n,header:"Duration"})]})}):null},[e,n]);return(0,v.jsxs)("div",{className:"section future-rot",children:[(0,v.jsxs)("span",{children:["Name: ",null===e||void 0===e?void 0:e.name]}),(0,v.jsxs)("span",{children:["IP: ",l.Fq.IP,(0,v.jsx)(a.$,{icon:"pi pi-copy",style:{scale:"0.8",verticalAlign:"unset"},onClick:()=>{navigator.clipboard.writeText(l.Fq.IP),m.t.SUCCESS(l.PL.COPY_SUCCESS)}})]}),(0,v.jsxs)("span",{children:["Players: ",null===e||void 0===e?void 0:e.players,"/",null===e||void 0===e?void 0:e.maxplayers," (",null===e||void 0===e?void 0:e.bots," ",1===(null===e||void 0===e?void 0:e.bots)?"bot":"bots",")"]}),(0,v.jsxs)("span",{children:["Status: ","1"===(null===e||void 0===e?void 0:e.status)?"Online":"Offline"]}),(0,v.jsxs)("span",{children:["Map: ",null===e||void 0===e?void 0:e.map]}),(0,v.jsx)("span",{children:(0,v.jsx)(a.$,{label:"Join game",onClick:()=>{window.location.href=l.Fq.STEAM_CONNECT_URL}})}),o()&&(0,v.jsx)("span",{children:o()}),(0,v.jsxs)("span",{className:"centered-text",children:["You can download all the custom maps installed on the server",(0,v.jsx)("a",{style:{display:"inline-block",marginLeft:"10px",textDecoration:"none",color:"white",WebkitTextStroke:" 3px red"},href:"https://steamcommunity.com/sharedfiles/filedetails/?id=2542824628",children:"HERE"})]})]})});var D=n(6744);const S={useCommandsLoadingService:()=>{E()},getCommands:()=>fetch(`${o.Y.COMMANDS}/getCommands`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{r.j.dispatch(D.U.setCommands(e))}).catch(e=>{m.t.ERROR(`Error while fetching commands: ${e.message}`)}),addNewCommand:e=>fetch(`${o.Y.COMMANDS}/addCommand`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:e.command,description:e.description})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(S.getCommands(),e)).catch(e=>{throw m.t.ERROR(`Error while adding new command: ${e.message}`),e}),deleteCommand:e=>fetch(`${o.Y.COMMANDS}/deleteCommand`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(S.getCommands(),e.message)).catch(e=>{throw m.t.ERROR(`Error while deleting command: ${e.message}`),e}),updateCommand:e=>fetch(`${o.Y.COMMANDS}/updateCommand`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,command:e.command,description:e.description})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(S.getCommands(),e.message)).catch(e=>{throw m.t.ERROR(`Error while updating command: ${e.message}`),e})},E=()=>{(0,i.useEffect)(()=>{S.getCommands()},[])};var k=n(8800),N=n(8852);function w(e){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h5",{children:"Command"}),(0,v.jsx)(N.S,{value:e.command,onChange:t=>e.setCommand(t.target.value)}),(0,v.jsx)("h5",{children:"Description"}),(0,v.jsx)(N.S,{value:e.commandDescription,onChange:t=>e.setCommandDescription(t.target.value)})]})}function O(e){return(0,v.jsx)(k.l,{visible:e.isDialogVisible,header:"Edit Command",modal:!0,className:"p-fluid",footer:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.$,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:()=>{e.commandEditingIdRef.current=-1,e.setDialogVisibility(!1)}}),(0,v.jsx)(a.$,{label:"Update",icon:"pi pi-check",className:"p-button-text",onClick:()=>{const t={command:e.command,description:e.commandDescription,id:e.commandEditingIdRef.current};S.updateCommand(t).then(()=>{m.t.SUCCESS("Successfully updated the command"),e.setDialogVisibility(!1),e.commandEditingIdRef.current=-1}).catch(e=>{m.t.ERROR(`Couldn't update the command: ${e.message}`)})}})]}),onHide:()=>{e.setDialogVisibility(!1)},children:(0,v.jsx)(w,{command:e.command,commandDescription:e.commandDescription,setCommand:e.setCommand,setCommandDescription:e.setCommandDescription})})}var _=n(2240);function A(e){const t=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.$,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:()=>e.setDialogVisibility(!1)}),(0,v.jsx)(a.$,{label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:()=>{const t={command:e.command,description:e.commandDescription};S.addNewCommand(t).then(()=>{m.t.SUCCESS("Successfully added new command"),e.setDialogVisibility(!1),e.setCommandDescription("")}).catch(e=>{m.t.ERROR(`Couldn't add the command: ${e.message}`)})}})]});return(0,v.jsx)(k.l,{visible:e.isDialogVisible,header:"Add new command",modal:!0,className:"p-fluid",footer:t,onHide:()=>e.setDialogVisibility(!1),children:(0,v.jsx)(w,{setCommandDescription:e.setCommandDescription,commandDescription:e.commandDescription,setCommand:e.setCommand,command:e.command})})}function $(){const e=(0,s.d4)(e=>e.userDataReducer.isAdmin),t=(0,s.d4)(e=>e.commandsReducer.commands),[n,o]=(0,i.useState)(""),r=(0,i.useRef)(-1),[d,c]=(0,i.useState)(""),[l,p]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1);S.useCommandsLoadingService();return(0,v.jsxs)("div",{className:"section",children:[(0,v.jsx)(A,{setCommandDescription:o,commandDescription:n,setCommand:c,command:d,isDialogVisible:l,setDialogVisibility:p}),(0,v.jsx)(O,{setCommandDescription:o,commandDescription:n,setCommand:c,command:d,commandEditingIdRef:r,isDialogVisible:u,setDialogVisibility:h}),e&&(0,v.jsx)(_.M,{className:"mb-4",start:(0,v.jsx)(v.Fragment,{children:e&&(0,v.jsx)(a.$,{label:"New Command",icon:"pi pi-plus",className:"mr-2","data-toggle":"tooltip",title:"Adds new command",onClick:()=>p(!0)})})}),(0,v.jsxs)(x.b,{value:t,responsiveLayout:"scroll",style:{backgroundColor:"transparent",background:"transparent",backdropFilter:"blur(2px)"},children:[(0,v.jsx)(j.V,{field:"command",header:"Command"}),(0,v.jsx)(j.V,{field:"description",header:"Description"}),e&&(0,v.jsx)(j.V,{header:"Actions",body:e=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.$,{"data-toggle":"tooltip",title:"Edits the given command",icon:"pi pi-pencil",className:"p-button-rounded mr-2",onClick:()=>{r.current=e.id,h(!0),c(e.command),o(e.description)}}),(0,v.jsx)(a.$,{"data-toggle":"tooltip",title:"Deletes the given command instantly",icon:"pi pi-trash",className:"p-button-rounded p-button-danger",onClick:()=>{S.deleteCommand(e).then(e=>{m.t.SUCCESS(`${e}`),p(!1),o("")}).catch(e=>{m.t.ERROR(`Couldn't delete the command: ${e}`)})}})]})})]})]})}var T=n(6521),I=n(6903);function U(){return(0,v.jsx)(T.K,{imageUrl:I.Y.BACKGROUND_1,children:(0,v.jsxs)("div",{className:"home-page",children:[(0,v.jsx)(R,{}),(0,v.jsx)($,{})]})})}},6521:(e,t,n)=>{n.d(t,{K:()=>i});const a="PageWithBackground_pageWithBackground__nL8hr";n(5579);var s=n(8171);const i=e=>(0,s.jsx)("div",{className:a,style:{backgroundImage:`url(${e.imageUrl})`},children:e.children})},6903:(e,t,n)=>{n.d(t,{Y:()=>m});const a=n.p+"static/media/background_1.bbbbf33c0f3cf7222559.jpg",s=n.p+"static/media/background_2.7713c83c2427f6bd817f.jpg",i=n.p+"static/media/background_3.4e932a7e40bb7c3fc904.jpg",o=n.p+"static/media/background_4.afd7ff29b91152c81d22.jpg",r=n.p+"static/media/background_5.4d636ab7f678d71f2368.jpg",d=n.p+"static/media/background_6.941575f694ad75fbd537.jpg",c=e=>`${e}`,m={BACKGROUND_1:c(a),BACKGROUND_2:c(s),BACKGROUND_3:c(i),BACKGROUND_4:c(o),BACKGROUND_5:c(r),BACKGROUND_6:c(d)}}}]);
//# sourceMappingURL=250.6265e09c.chunk.js.map