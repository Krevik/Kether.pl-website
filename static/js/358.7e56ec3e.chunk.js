"use strict";(globalThis.webpackChunkkether_pl=globalThis.webpackChunkkether_pl||[]).push([[358],{1114:(e,t,s)=>{s.d(t,{h:()=>n});let n=function(e){return e.UPVOTE="Upvote",e.DOWNVOTE="Downvote",e}({})},2391:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var n=s(7224),i=s(1004),o=s(3766),r=s(2763),a=s(9128),d=s(5485),c=s(546),u=s(1638),h=s(259),g=s(6938),l=s(3223),p=s(9361);const b={useBindSuggestionsLoadingService:()=>B(),getBindSuggestions:()=>fetch(`${l.o}${h.T.API_BASE_PATH}${h.T.BIND_SUGGESTIONS_PATH}/getBindSuggestions`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{u.j.dispatch(g.m.setBindSuggestions(e))}).catch(e=>{p.t.ERROR(`Error while fetching bind suggestions: ${e.message}`)}),addNewBindSuggestion:e=>fetch(`${l.o}${h.T.API_BASE_PATH}${h.T.BIND_SUGGESTIONS_PATH}/addBindSuggestion`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:e.author,text:e.text,proposed_by:e.proposedBy})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return b.getBindSuggestions(),e.json()}).catch(e=>{throw p.t.ERROR(`Error while adding new bind suggestion: ${e.message}`),e}),deleteBindSuggestion:e=>fetch(`${l.o}${h.T.API_BASE_PATH}${h.T.BIND_SUGGESTIONS_PATH}/deleteBindSuggestion`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(b.getBindSuggestions(),e.message)).catch(e=>{throw p.t.ERROR(`Error while deleting bind suggestion: ${e.message}`),e})},B=()=>{const e=(0,o.d4)(e=>e.userDataReducer.userData),[t,s]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{s(!0),b.getBindSuggestions().finally(()=>{s(!1)})},[e]),t};var T=s(6726),S=s(9230),f=s(8505);function A(e){const t=(0,o.d4)(e=>e.userDataReducer.userData),s=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.$,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:()=>e.setDialogVisibility(!1)}),(0,f.jsx)(a.$,{label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:()=>{const s={id:-1,proposedBy:t.personaname,author:e.bindAuthor,text:e.bindText};b.addNewBindSuggestion(s).then(()=>{p.t.SUCCESS("Successfully suggested new bind"),e.setDialogVisibility(!1),e.setBindText("")}).catch(e=>{p.t.ERROR(`Couldn't suggest the bind: ${e}`)})}})]});return(0,f.jsx)(T.l,{visible:e.isDialogVisible,header:"Suggest new bind",modal:!0,className:"p-fluid",footer:s,onHide:()=>e.setDialogVisibility(!1),children:(0,f.jsx)(S.A,{setBindText:e.setBindText,bindText:e.bindText,setBindAuthor:e.setBindAuthor,bindAuthor:e.bindAuthor})})}var E=s(5475),m=s(7020),$=s(9987);const D=e=>e.map(e=>({...e,author:`${e.author} : `})),x=(e,t)=>(0,f.jsx)(f.Fragment,{children:e&&(0,f.jsx)(a.$,{label:"Suggest Bind",icon:"pi pi-plus",className:"p-button-success mr-2","data-toggle":"tooltip",title:"Adds new bind suggestion",onClick:()=>t(!0)})}),j=(e,t,s)=>t&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.$,{"data-toggle":"tooltip",title:"Accepts the given bind",icon:"pi pi-check",className:"p-button-rounded p-button-success",onClick:()=>{const t=(0,$.f)(e);r.O.addNewBind(t,null===s||void 0===s?void 0:s.steamid).then(e=>{p.t.SUCCESS(`Successfully accepted new bind: ${e}`),b.deleteBindSuggestion(t)}).catch(e=>{p.t.ERROR(`Couldn't add new bind: ${e}`)})}}),(0,f.jsx)(a.$,{"data-toggle":"tooltip",title:"Deletes the given bind suggestion instantly",icon:"pi pi-times",className:"p-button-rounded p-button-danger",onClick:()=>{b.deleteBindSuggestion(e).then(e=>{p.t.SUCCESS(`Successfully deleted bind suggestion: ${e}`)}).catch(e=>{p.t.ERROR(`Couldn't delete bind suggestion: ${e}`)})}})]});function v(){const e=(0,o.d4)(e=>e.bindSuggestionsReducer.bindSuggestions),t=(0,o.d4)(e=>e.userDataReducer.userID),s=(0,o.d4)(e=>e.userDataReducer.userData),r=(0,o.d4)(e=>e.userDataReducer.isAdmin),[a,u]=(0,d.useState)(!1),[h,g]=(0,d.useState)(""),l=(0,d.useRef)(-1),[p,B]=(0,d.useState)(""),T=b.useBindSuggestionsLoadingService();return(0,f.jsx)(E.K,{imageUrl:m.Y.BACKGROUND_2,children:(0,f.jsx)("div",{className:"hall-of-fame-suggestions",children:(0,f.jsxs)("div",{className:"card",children:[(0,f.jsx)(A,{setBindText:B,bindText:p,setBindAuthor:g,bindAuthor:h,bindEditingIdRef:l,isDialogVisible:a,setDialogVisibility:u}),(0,f.jsx)(c.M,{className:"mb-4",start:x(t,u)}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"centered-text",children:"Bind Suggestions"}),(0,f.jsx)("div",{className:"card",children:T?(0,f.jsx)("p",{children:"Loading..."}):(0,f.jsxs)(i.b,{value:D(e),scrollable:!0,scrollHeight:"flex",children:[(0,f.jsx)(n.V,{field:"proposedBy",header:"Proposed By"}),(0,f.jsx)(n.V,{field:"id",header:"database ID",sortable:!0}),(0,f.jsx)(n.V,{field:"author",header:"Author",sortable:!0}),(0,f.jsx)(n.V,{field:"text",header:"Text",sortable:!0}),(0,f.jsx)(n.V,{header:"Actions",body:e=>j(e,r,s)})]})})]})]})})})}},2763:(e,t,s)=>{s.d(t,{O:()=>h});var n=s(5485),i=s(1114),o=s(1638),r=s(7766),a=s(259),d=s(3766),c=s(3223),u=s(9361);const h={useBindsLoadingService:e=>l(e||void 0),getBinds:e=>fetch(`${c.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/getBinds`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(t=>g().then(s=>{var n;let a=[];e&&(a=s.filter(t=>t.voterSteamID===e));const d=[];null===s||void 0===s||s.forEach(e=>{const t="Upvote"===e.vote?i.h.UPVOTE:i.h.DOWNVOTE,s=t===i.h.UPVOTE,n=t===i.h.DOWNVOTE,o=d.find(t=>t.attachedBindID===Number(e.votedBindID));if(o)s&&o.Upvotes++,n&&o.Downvotes++;else{const t={id:Number(e.votedBindID),attachedBindID:Number(e.votedBindID),Upvotes:s?1:0,Downvotes:n?1:0};d.push(t)}}),null===d||void 0===d||d.forEach(e=>{const s=t.find(t=>t.id===e.attachedBindID);s&&(s.votingData=e)}),null===(n=a)||void 0===n||n.forEach(e=>{const s=t.find(t=>t.id===Number(e.votedBindID));s&&(s.votingData.selfVote=e.vote)}),o.j.dispatch(r.E.setBinds(t))})).catch(e=>{u.t.ERROR(`Error while fetching binds: ${e.message}`)}),setVote:(e,t)=>{const s=new URLSearchParams({voterSteamID:e.voterSteamID,votedBindID:e.votedBindID,vote:e.vote});return e.id&&s.set("id",e.id.toString()),fetch(`${c.o}${a.T.API_BASE_PATH}${a.T.BIND_VOTES_PATH}/${t?"deleteBindVoting":"addBindVoting"}`,{method:"post",body:s}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return h.getBinds(e.voterSteamID),t.text()}).catch(e=>{throw u.t.ERROR(`Error while setting vote: ${e.message}`),e})},addNewBind:(e,t)=>fetch(`${c.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/addBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:e.author,text:e.text})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return h.getBinds(t),e.json()}).catch(e=>{throw u.t.ERROR(`Error while adding new bind: ${e.message}`),e}),deleteBind:(e,t)=>fetch(`${c.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/deleteBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(h.getBinds(t),e.message)).catch(e=>{throw u.t.ERROR(`Error while deleting bind: ${e.message}`),e}),updateBind:(e,t)=>fetch(`${c.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/updateBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,author:`${e.author}`,text:`${e.text}`})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(h.getBinds(t),e.message)).catch(e=>{throw u.t.ERROR(`Error while updating bind: ${e.message}`),e})},g=()=>fetch(`${c.o}${a.T.API_BASE_PATH}${a.T.BIND_VOTES_PATH}/getBindVotings`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).catch(e=>(u.t.ERROR(`Error while fetching bind votes: ${e.message}`),[])),l=e=>{const t=(0,d.d4)(e=>e.userDataReducer.userData),[s,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{i(!0),h.getBinds(e).finally(()=>{i(!1)})},[t,e]),s}},5475:(e,t,s)=>{s.d(t,{K:()=>o});const n="PageWithBackground_pageWithBackground__nL8hr";s(5485);var i=s(8505);const o=e=>(0,i.jsx)("div",{className:n,style:{backgroundImage:`url(${e.imageUrl})`},children:e.children})},7020:(e,t,s)=>{s.d(t,{Y:()=>u});const n=s.p+"static/media/background_1.bbbbf33c0f3cf7222559.jpg",i=s.p+"static/media/background_2.7713c83c2427f6bd817f.jpg",o=s.p+"static/media/background_3.4e932a7e40bb7c3fc904.jpg",r=s.p+"static/media/background_4.afd7ff29b91152c81d22.jpg",a=s.p+"static/media/background_5.4d636ab7f678d71f2368.jpg",d=s.p+"static/media/background_6.941575f694ad75fbd537.jpg",c=e=>`${e}`,u={BACKGROUND_1:c(n),BACKGROUND_2:c(i),BACKGROUND_3:c(o),BACKGROUND_4:c(r),BACKGROUND_5:c(a),BACKGROUND_6:c(d)}},9230:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(5129),i=s(9987),o=s(8505);function r(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{children:"Author"}),(0,o.jsx)(n.S,{value:i.j.replaceNonEnglishLatinChars(e.bindAuthor),onChange:t=>e.setBindAuthor(t.target.value)}),(0,o.jsx)("h5",{children:"Text"}),(0,o.jsx)(n.S,{value:i.j.replaceNonEnglishLatinChars(e.bindText),onChange:t=>e.setBindText(t.target.value)})]})}},9987:(e,t,s)=>{s.d(t,{f:()=>n,j:()=>i});const n=e=>({...e,author:e.author.replace(":","").trim()}),i={replaceNonEnglishLatinChars:e=>{const t={"A\u0300":"A","A\u0301":"A","A\u0302":"A","A\u0303":"A","A\u0308":"A","A\u030a":"A","C\u0327":"C","E\u0300":"E","E\u0301":"E","E\u0302":"E","E\u0308":"E","I\u0300":"I","I\u0301":"I","I\u0302":"I","I\u0308":"I","N\u0303":"N","O\u0300":"O","O\u0302":"O","O\u0303":"O","O\u0308":"O","O\u0327":"O","U\u0300":"U","U\u0301":"U","U\u0302":"U","U\u0308":"U","Y\u0301":"Y","a\u0300":"a","a\u0301":"a","a\u0302":"a","a\u0303":"a","a\u0308":"a","a\u030a":"a","c\u0327":"c","e\u0300":"e","e\u0301":"e","e\u0302":"e","e\u0308":"e","i\u0300":"i","i\u0301":"i","i\u0302":"i","i\u0308":"i","n\u0303":"n","o\u0300":"o","o\u0302":"o","o\u0303":"o","o\u0308":"o","o\u0327":"o","u\u0300":"u","u\u0301":"u","u\u0302":"u","u\u0308":"u","y\u0301":"y","\u0104":"A","\u0106":"C","\u0118":"E","\u0141":"L","\u0143":"N","\xd3":"O","\u015a":"S","\u0179":"Z","\u017b":"Z","\u0105":"a","\u0107":"c","\u0119":"e","\u0142":"l","\u0144":"n","\xf3":"o","\u015b":"s","\u017a":"z","\u017c":"z"};return e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\u0000-\u007F]/g,e=>t[e]||e).replace(/[:;#*()]/g,"").replace("^","").replace("%"," procent")}}}}]);