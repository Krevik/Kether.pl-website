"use strict";(globalThis.webpackChunkkether_pl=globalThis.webpackChunkkether_pl||[]).push([[396],{2057:(t,e,i)=>{i.d(e,{f:()=>n,j:()=>d});const n=t=>({...t,author:t.author.replace(":","").trim()}),d={replaceNonEnglishLatinChars:t=>{const e={"A\u0300":"A","A\u0301":"A","A\u0302":"A","A\u0303":"A","A\u0308":"A","A\u030a":"A","C\u0327":"C","E\u0300":"E","E\u0301":"E","E\u0302":"E","E\u0308":"E","I\u0300":"I","I\u0301":"I","I\u0302":"I","I\u0308":"I","N\u0303":"N","O\u0300":"O","O\u0302":"O","O\u0303":"O","O\u0308":"O","O\u0327":"O","U\u0300":"U","U\u0301":"U","U\u0302":"U","U\u0308":"U","Y\u0301":"Y","a\u0300":"a","a\u0301":"a","a\u0302":"a","a\u0303":"a","a\u0308":"a","a\u030a":"a","c\u0327":"c","e\u0300":"e","e\u0301":"e","e\u0302":"e","e\u0308":"e","i\u0300":"i","i\u0301":"i","i\u0302":"i","i\u0308":"i","n\u0303":"n","o\u0300":"o","o\u0302":"o","o\u0303":"o","o\u0308":"o","o\u0327":"o","u\u0300":"u","u\u0301":"u","u\u0302":"u","u\u0308":"u","y\u0301":"y","\u0104":"A","\u0106":"C","\u0118":"E","\u0141":"L","\u0143":"N","\xd3":"O","\u015a":"S","\u0179":"Z","\u017b":"Z","\u0105":"a","\u0107":"c","\u0119":"e","\u0142":"l","\u0144":"n","\xf3":"o","\u015b":"s","\u017a":"z","\u017c":"z"};return t.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\u0000-\u007F]/g,t=>e[t]||t).replace(/[:;#*()]/g,"").replace("^","").replace("%"," procent")}}},2825:(t,e,i)=>{i.r(e),i.d(e,{default:()=>j});var n=i(5910),d=i(2492),o=i(2692),s=i(4225),a=i(3246),r=i(5888),l=i(5579),c=i(2240),h=i(1287),u=i(8800),g=i(3728),b=i(8171);function p(t){return(0,b.jsx)(u.l,{visible:t.isDialogVisible,header:"Edit Bind",modal:!0,className:"p-fluid",footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.$,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:()=>{t.bindEditingIdRef.current=-1,t.setDialogVisibility(!1)}}),(0,b.jsx)(a.$,{label:"Update",icon:"pi pi-check",className:"p-button-text",onClick:()=>{const e={author:t.bindAuthor,text:t.bindText,id:t.bindEditingIdRef.current};s.O.updateBind(e).then(()=>{h.t.SUCCESS("Successfully updated the bind"),t.setDialogVisibility(!1),t.bindEditingIdRef.current=-1}).catch(t=>{h.t.ERROR(`Couldn't update the bind: ${t}`)})}})]}),onHide:()=>{t.setDialogVisibility(!1)},children:(0,b.jsx)(g.A,{bindAuthor:t.bindAuthor,bindText:t.bindText,setBindAuthor:t.setBindAuthor,setBindText:t.setBindText})})}function v(t){const e=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.$,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:()=>t.setDialogVisibility(!1)}),(0,b.jsx)(a.$,{label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:()=>{const e={author:t.bindAuthor,text:t.bindText};s.O.addNewBind(e).then(()=>{h.t.SUCCESS("Successfully added new bind"),t.setDialogVisibility(!1),t.setBindText("")}).catch(t=>{h.t.ERROR(`Couldn't add the bind: ${t}`)})}})]});return(0,b.jsx)(u.l,{visible:t.isDialogVisible,header:"Add new Bind",modal:!0,className:"p-fluid",footer:e,onHide:()=>t.setDialogVisibility(!1),children:(0,b.jsx)(g.A,{setBindText:t.setBindText,bindText:t.bindText,setBindAuthor:t.setBindAuthor,bindAuthor:t.bindAuthor})})}var m=i(6521),T=i(6903),x=i(2057);const B=t=>t.map(t=>({...t,author:`${t.author} : `})),f=(t,e)=>(0,b.jsx)(b.Fragment,{children:t&&(0,b.jsx)(a.$,{label:"New Bind",icon:"pi pi-plus",className:"p-button-success mr-2","data-toggle":"tooltip",title:"Adds new bind",onClick:()=>e(!0)})}),A=(t,e,i,n,d,o)=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.$,{"data-toggle":"tooltip",title:"Edits the given bind",icon:"pi pi-pencil",className:"p-button-rounded p-button-warning mr-2",onClick:()=>{d.current=t.id,e(!0),i((0,x.f)(t).author),n(t.text)}}),(0,b.jsx)(a.$,{"data-toggle":"tooltip",title:"Deletes the given bind instantly",icon:"pi pi-trash",className:"p-button-rounded p-button-danger",onClick:()=>{s.O.deleteBind(t,null===o||void 0===o?void 0:o.steamid).then(t=>{h.t.SUCCESS(`${t}`)}).catch(t=>{h.t.ERROR(`Couldn't delete the bind: ${t}`)})}})]}),E=(t,e,i,n)=>{var d;const o={voterSteamID:null===i||void 0===i?void 0:i.steamid,votedBindID:e.id.toString(),vote:t};o.id=(null===(d=e.votingData)||void 0===d?void 0:d.id)||void 0,s.O.setVote(o,n).then(t=>{h.t.SUCCESS(t)}).catch(t=>{h.t.ERROR(t)})},D=(t,e)=>{var i,n,d;const o=null===(i=t.votingData)||void 0===i?void 0:i.selfVote,s=`vote-up-button ${o&&o===r.h.UPVOTE?"self-voted":""}`,l=`vote-down-button ${o&&o===r.h.DOWNVOTE?"self-voted":""}`;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.$,{className:s,icon:"pi pi-thumbs-up",onClick:()=>{E(r.h.UPVOTE,t,e,o&&o===r.h.UPVOTE)},children:(null===(n=t.votingData)||void 0===n?void 0:n.Upvotes)||0}),(0,b.jsx)(a.$,{className:l,icon:"pi pi-thumbs-down",onClick:()=>{E(r.h.DOWNVOTE,t,e,o&&o===r.h.DOWNVOTE)},children:(null===(d=t.votingData)||void 0===d?void 0:d.Downvotes)||0})]})};function j(){const t=(0,o.d4)(t=>t.bindsReducer.binds),e=(0,o.d4)(t=>t.userDataReducer.isAdmin),i=(0,o.d4)(t=>t.userDataReducer.userData),a=(0,o.d4)(t=>t.userDataReducer.userID),[r,h]=(0,l.useState)(!1),[u,g]=(0,l.useState)(!1),[x,E]=(0,l.useState)(""),j=(0,l.useRef)(-1),[O,N]=(0,l.useState)(""),$=s.O.useBindsLoadingService(null===i||void 0===i?void 0:i.steamid);return(0,b.jsx)(m.K,{imageUrl:T.Y.BACKGROUND_2,children:(0,b.jsx)("div",{className:"hall-of-fame",children:(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)(v,{setBindText:N,bindText:O,setBindAuthor:E,bindAuthor:x,isDialogVisible:r,setDialogVisibility:h}),(0,b.jsx)(p,{setBindText:N,bindText:O,setBindAuthor:E,bindAuthor:x,bindEditingIdRef:j,isDialogVisible:u,setDialogVisibility:g}),(0,b.jsx)(c.M,{className:"mb-4",start:f(e,h)}),(0,b.jsx)("div",{className:"centered-text",children:" Binds"}),(0,b.jsx)("div",{className:"card",children:$?(0,b.jsx)("p",{children:"Loading..."}):(0,b.jsxs)(d.b,{value:B(t),scrollable:!0,scrollHeight:"flex",children:[e&&(0,b.jsx)(n.V,{field:"id",header:"database ID",sortable:!0}),(0,b.jsx)(n.V,{field:"author",header:"Author",sortable:!0}),(0,b.jsx)(n.V,{field:"text",header:"Text",sortable:!0}),a&&i&&i.steamid&&(0,b.jsx)(n.V,{className:"voting",header:"Voting",body:t=>D(t,i)}),e&&(0,b.jsx)(n.V,{header:"Actions",body:t=>A(t,g,E,N,j,i)})]})})]})})})}},3728:(t,e,i)=>{i.d(e,{A:()=>s});var n=i(8852),d=i(2057),o=i(8171);function s(t){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{children:"Author"}),(0,o.jsx)(n.S,{value:d.j.replaceNonEnglishLatinChars(t.bindAuthor),onChange:e=>t.setBindAuthor(e.target.value)}),(0,o.jsx)("h5",{children:"Text"}),(0,o.jsx)(n.S,{value:d.j.replaceNonEnglishLatinChars(t.bindText),onChange:e=>t.setBindText(e.target.value)})]})}},4225:(t,e,i)=>{i.d(e,{O:()=>h});var n=i(5579),d=i(5888),o=i(2967),s=i(5588),a=i(405),r=i(2692),l=i(6545),c=i(1287);const h={useBindsLoadingService:t=>g(t||void 0),getBinds:t=>fetch(`${l.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/getBinds`,{method:"get"}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(e=>u().then(i=>{var n;let a=[];t&&(a=i.filter(e=>e.voterSteamID===t));const r=[];null===i||void 0===i||i.forEach(t=>{const e="Upvote"===t.vote?d.h.UPVOTE:d.h.DOWNVOTE,i=e===d.h.UPVOTE,n=e===d.h.DOWNVOTE,o=r.find(e=>e.attachedBindID===Number(t.votedBindID));if(o)i&&o.Upvotes++,n&&o.Downvotes++;else{const e={id:Number(t.votedBindID),attachedBindID:Number(t.votedBindID),Upvotes:i?1:0,Downvotes:n?1:0};r.push(e)}}),null===r||void 0===r||r.forEach(t=>{const i=e.find(e=>e.id===t.attachedBindID);i&&(i.votingData=t)}),null===(n=a)||void 0===n||n.forEach(t=>{const i=e.find(e=>e.id===Number(t.votedBindID));i&&(i.votingData.selfVote=t.vote)}),o.j.dispatch(s.E.setBinds(e))})).catch(t=>{c.t.ERROR(`Error while fetching binds: ${t.message}`)}),setVote:(t,e)=>{const i=new URLSearchParams({voterSteamID:t.voterSteamID,votedBindID:t.votedBindID,vote:t.vote});return t.id&&i.set("id",t.id.toString()),fetch(`${l.o}${a.T.API_BASE_PATH}${a.T.BIND_VOTES_PATH}/${e?"deleteBindVoting":"addBindVoting"}`,{method:"post",body:i}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return h.getBinds(t.voterSteamID),e.text()}).catch(t=>{throw c.t.ERROR(`Error while setting vote: ${t.message}`),t})},addNewBind:(t,e)=>fetch(`${l.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/addBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:t.author,text:t.text})}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return h.getBinds(e),t.json()}).catch(t=>{throw c.t.ERROR(`Error while adding new bind: ${t.message}`),t}),deleteBind:(t,e)=>fetch(`${l.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/deleteBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>(h.getBinds(e),t.message)).catch(t=>{throw c.t.ERROR(`Error while deleting bind: ${t.message}`),t}),updateBind:(t,e)=>fetch(`${l.o}${a.T.API_BASE_PATH}${a.T.BINDS_PATH}/updateBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,author:`${t.author}`,text:`${t.text}`})}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>(h.getBinds(e),t.message)).catch(t=>{throw c.t.ERROR(`Error while updating bind: ${t.message}`),t})},u=()=>fetch(`${l.o}${a.T.API_BASE_PATH}${a.T.BIND_VOTES_PATH}/getBindVotings`,{method:"get"}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).catch(t=>(c.t.ERROR(`Error while fetching bind votes: ${t.message}`),[])),g=t=>{const e=(0,r.d4)(t=>t.userDataReducer.userData),[i,d]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{d(!0),h.getBinds(t).finally(()=>{d(!1)})},[e,t]),i}},5888:(t,e,i)=>{i.d(e,{h:()=>n});let n=function(t){return t.UPVOTE="Upvote",t.DOWNVOTE="Downvote",t}({})},6521:(t,e,i)=>{i.d(e,{K:()=>o});const n="PageWithBackground_pageWithBackground__nL8hr";i(5579);var d=i(8171);const o=t=>(0,d.jsx)("div",{className:n,style:{backgroundImage:`url(${t.imageUrl})`},children:t.children})},6903:(t,e,i)=>{i.d(e,{Y:()=>c});const n=i.p+"static/media/background_1.bbbbf33c0f3cf7222559.jpg",d=i.p+"static/media/background_2.7713c83c2427f6bd817f.jpg",o=i.p+"static/media/background_3.4e932a7e40bb7c3fc904.jpg",s=i.p+"static/media/background_4.afd7ff29b91152c81d22.jpg",a=i.p+"static/media/background_5.4d636ab7f678d71f2368.jpg",r=i.p+"static/media/background_6.941575f694ad75fbd537.jpg",l=t=>`${t}`,c={BACKGROUND_1:l(n),BACKGROUND_2:l(d),BACKGROUND_3:l(o),BACKGROUND_4:l(s),BACKGROUND_5:l(a),BACKGROUND_6:l(r)}}}]);
//# sourceMappingURL=396.ecb8ae2f.chunk.js.map