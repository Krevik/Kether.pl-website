"use strict";(globalThis.webpackChunkkether_pl=globalThis.webpackChunkkether_pl||[]).push([[358],{1114:(e,t,s)=>{s.d(t,{h:()=>i});let i=function(e){return e.UPVOTE="Upvote",e.DOWNVOTE="Downvote",e}({})},2391:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var i=s(7224),n=s(1004),o=s(3766),a=s(2763),r=s(9128),d=s(5485),c=s(546),u=s(1638),l=s(259),h=s(6938),g=s(3223),p=s(9361);const T={useBindSuggestionsLoadingService:()=>B(),getBindSuggestions:()=>fetch(`${g.o}${l.T.API_BASE_PATH}${l.T.BIND_SUGGESTIONS_PATH}/getBindSuggestions`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{u.j.dispatch(h.m.setBindSuggestions(e))}).catch(e=>{p.t.ERROR(`Error while fetching bind suggestions: ${e.message}`)}),addNewBindSuggestion:e=>fetch(`${g.o}${l.T.API_BASE_PATH}${l.T.BIND_SUGGESTIONS_PATH}/addBindSuggestion`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:e.author,text:e.text,proposed_by:e.proposedBy})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return T.getBindSuggestions(),e.json()}).catch(e=>{throw p.t.ERROR(`Error while adding new bind suggestion: ${e.message}`),e}),deleteBindSuggestion:e=>fetch(`${g.o}${l.T.API_BASE_PATH}${l.T.BIND_SUGGESTIONS_PATH}/deleteBindSuggestion`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(T.getBindSuggestions(),e.message)).catch(e=>{throw p.t.ERROR(`Error while deleting bind suggestion: ${e.message}`),e})},B=()=>{const e=(0,o.d4)(e=>e.userDataReducer.userData),[t,s]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{s(!0),T.getBindSuggestions().finally(()=>{s(!1)})},[e]),t};var b=s(6726),S=s(9230),f=s(9957),A=s(8505);function E(e){const t=(0,o.d4)(e=>e.userDataReducer.userData),s=(0,f.TP)(),i=(0,f.FC)(),n=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.$,{label:i.cancel,icon:"pi pi-times",className:"p-button-text",onClick:()=>e.setDialogVisibility(!1)}),(0,A.jsx)(r.$,{label:i.save,icon:"pi pi-check",className:"p-button-text",onClick:()=>{const i={id:-1,proposedBy:t.personaname,author:e.bindAuthor,text:e.bindText};T.addNewBindSuggestion(i).then(()=>{p.t.SUCCESS(s.successfullySuggested),e.setDialogVisibility(!1),e.setBindText("")}).catch(e=>{p.t.ERROR(`${s.couldntAdd}: ${e}`)})}})]});return(0,A.jsx)(b.l,{visible:e.isDialogVisible,header:s.addNewSuggestion,modal:!0,className:"p-fluid",footer:n,onHide:()=>e.setDialogVisibility(!1),children:(0,A.jsx)(S.A,{setBindText:e.setBindText,bindText:e.bindText,setBindAuthor:e.setBindAuthor,bindAuthor:e.bindAuthor})})}var m=s(5475),$=s(7020),x=s(9987);const D=e=>e.map(e=>({...e,author:`${e.author} : `})),j=(e,t,s)=>(0,A.jsx)(A.Fragment,{children:e&&(0,A.jsx)(r.$,{label:s.suggestBind,icon:"pi pi-plus",className:"p-button-success mr-2","data-toggle":"tooltip",title:s.suggestBindTooltip,onClick:()=>t(!0)})}),N=(e,t,s,i)=>t&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.$,{"data-toggle":"tooltip",title:i.acceptBindTooltip,icon:"pi pi-check",className:"p-button-rounded p-button-success",onClick:()=>{const t=(0,x.f)(e);a.O.addNewBind(t,null===s||void 0===s?void 0:s.steamid).then(e=>{p.t.SUCCESS(i.successfullyAccepted),T.deleteBindSuggestion(t)}).catch(e=>{p.t.ERROR(`${i.couldntAccept}: ${e}`)})}}),(0,A.jsx)(r.$,{"data-toggle":"tooltip",title:i.deleteSuggestionTooltip,icon:"pi pi-times",className:"p-button-rounded p-button-danger",onClick:()=>{T.deleteBindSuggestion(e).then(e=>{p.t.SUCCESS(`Successfully deleted bind suggestion: ${e}`)}).catch(e=>{p.t.ERROR(`${i.couldntDelete}: ${e}`)})}})]});function v(){const e=(0,o.d4)(e=>e.bindSuggestionsReducer.bindSuggestions),t=(0,f.TP)(),s=(0,f.sz)(),a=(0,o.d4)(e=>e.userDataReducer.userID),r=(0,o.d4)(e=>e.userDataReducer.userData),u=(0,o.d4)(e=>e.userDataReducer.isAdmin),[l,h]=(0,d.useState)(!1),[g,p]=(0,d.useState)(""),B=(0,d.useRef)(-1),[b,S]=(0,d.useState)(""),x=T.useBindSuggestionsLoadingService();return(0,A.jsx)(m.K,{imageUrl:$.Y.BACKGROUND_2,children:(0,A.jsx)("div",{className:"hall-of-fame-suggestions",children:(0,A.jsxs)("div",{className:"card",children:[(0,A.jsx)(E,{setBindText:S,bindText:b,setBindAuthor:p,bindAuthor:g,bindEditingIdRef:B,isDialogVisible:l,setDialogVisibility:h}),(0,A.jsx)(c.M,{className:"mb-4",start:j(a,h,t)}),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"centered-text",children:t.bindSuggestions}),(0,A.jsx)("div",{className:"card",children:x?(0,A.jsx)("p",{children:"Loading..."}):(0,A.jsxs)(n.b,{value:D(e),scrollable:!0,scrollHeight:"flex",emptyMessage:t.noSuggestionsAvailable,children:[(0,A.jsx)(i.V,{field:"proposedBy",header:t.proposedBy}),(0,A.jsx)(i.V,{field:"id",header:s.databaseId,sortable:!0}),(0,A.jsx)(i.V,{field:"author",header:s.author,sortable:!0}),(0,A.jsx)(i.V,{field:"text",header:s.text,sortable:!0}),(0,A.jsx)(i.V,{header:s.actions,body:e=>N(e,u,r,t)})]})})]})]})})})}},2763:(e,t,s)=>{s.d(t,{O:()=>l});var i=s(5485),n=s(1114),o=s(1638),a=s(7766),r=s(259),d=s(3766),c=s(3223),u=s(9361);const l={useBindsLoadingService:e=>g(e||void 0),getBinds:e=>fetch(`${c.o}${r.T.API_BASE_PATH}${r.T.BINDS_PATH}/getBinds`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(t=>h().then(s=>{var i;let r=[];e&&(r=s.filter(t=>t.voterSteamID===e));const d=[];null===s||void 0===s||s.forEach(e=>{const t="Upvote"===e.vote?n.h.UPVOTE:n.h.DOWNVOTE,s=t===n.h.UPVOTE,i=t===n.h.DOWNVOTE,o=d.find(t=>t.attachedBindID===Number(e.votedBindID));if(o)s&&o.Upvotes++,i&&o.Downvotes++;else{const t={id:Number(e.votedBindID),attachedBindID:Number(e.votedBindID),Upvotes:s?1:0,Downvotes:i?1:0};d.push(t)}}),null===d||void 0===d||d.forEach(e=>{const s=t.find(t=>t.id===e.attachedBindID);s&&(s.votingData=e)}),null===(i=r)||void 0===i||i.forEach(e=>{const s=t.find(t=>t.id===Number(e.votedBindID));s&&(s.votingData.selfVote=e.vote)}),o.j.dispatch(a.E.setBinds(t))})).catch(e=>{u.t.ERROR(`Error while fetching binds: ${e.message}`)}),setVote:(e,t)=>{const s=new URLSearchParams({voterSteamID:e.voterSteamID,votedBindID:e.votedBindID,vote:e.vote});return e.id&&s.set("id",e.id.toString()),fetch(`${c.o}${r.T.API_BASE_PATH}${r.T.BIND_VOTES_PATH}/${t?"deleteBindVoting":"addBindVoting"}`,{method:"post",body:s}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return l.getBinds(e.voterSteamID),t.text()}).catch(e=>{throw u.t.ERROR(`Error while setting vote: ${e.message}`),e})},addNewBind:(e,t)=>fetch(`${c.o}${r.T.API_BASE_PATH}${r.T.BINDS_PATH}/addBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:e.author,text:e.text})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return l.getBinds(t),e.json()}).catch(e=>{throw u.t.ERROR(`Error while adding new bind: ${e.message}`),e}),deleteBind:(e,t)=>fetch(`${c.o}${r.T.API_BASE_PATH}${r.T.BINDS_PATH}/deleteBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(l.getBinds(t),e.message)).catch(e=>{throw u.t.ERROR(`Error while deleting bind: ${e.message}`),e}),updateBind:(e,t)=>fetch(`${c.o}${r.T.API_BASE_PATH}${r.T.BINDS_PATH}/updateBind`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,author:`${e.author}`,text:`${e.text}`})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(l.getBinds(t),e.message)).catch(e=>{throw u.t.ERROR(`Error while updating bind: ${e.message}`),e})},h=()=>fetch(`${c.o}${r.T.API_BASE_PATH}${r.T.BIND_VOTES_PATH}/getBindVotings`,{method:"get"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).catch(e=>(u.t.ERROR(`Error while fetching bind votes: ${e.message}`),[])),g=e=>{const t=(0,d.d4)(e=>e.userDataReducer.userData),[s,n]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{n(!0),l.getBinds(e).finally(()=>{n(!1)})},[t,e]),s}},5475:(e,t,s)=>{s.d(t,{K:()=>o});const i="PageWithBackground_pageWithBackground__nL8hr";s(5485);var n=s(8505);const o=e=>(0,n.jsx)("div",{className:i,style:{backgroundImage:`url(${e.imageUrl})`},children:e.children})},7020:(e,t,s)=>{s.d(t,{Y:()=>u});const i=s.p+"static/media/background_1.bbbbf33c0f3cf7222559.jpg",n=s.p+"static/media/background_2.7713c83c2427f6bd817f.jpg",o=s.p+"static/media/background_3.4e932a7e40bb7c3fc904.jpg",a=s.p+"static/media/background_4.afd7ff29b91152c81d22.jpg",r=s.p+"static/media/background_5.4d636ab7f678d71f2368.jpg",d=s.p+"static/media/background_6.941575f694ad75fbd537.jpg",c=e=>`${e}`,u={BACKGROUND_1:c(i),BACKGROUND_2:c(n),BACKGROUND_3:c(o),BACKGROUND_4:c(a),BACKGROUND_5:c(r),BACKGROUND_6:c(d)}},9230:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(5129),n=s(9987),o=s(8505);function a(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{children:"Author"}),(0,o.jsx)(i.S,{value:n.j.replaceNonEnglishLatinChars(e.bindAuthor),onChange:t=>e.setBindAuthor(t.target.value)}),(0,o.jsx)("h5",{children:"Text"}),(0,o.jsx)(i.S,{value:n.j.replaceNonEnglishLatinChars(e.bindText),onChange:t=>e.setBindText(t.target.value)})]})}},9987:(e,t,s)=>{s.d(t,{f:()=>i,j:()=>n});const i=e=>({...e,author:e.author.replace(":","").trim()}),n={replaceNonEnglishLatinChars:e=>{const t={"A\u0300":"A","A\u0301":"A","A\u0302":"A","A\u0303":"A","A\u0308":"A","A\u030a":"A","C\u0327":"C","E\u0300":"E","E\u0301":"E","E\u0302":"E","E\u0308":"E","I\u0300":"I","I\u0301":"I","I\u0302":"I","I\u0308":"I","N\u0303":"N","O\u0300":"O","O\u0302":"O","O\u0303":"O","O\u0308":"O","O\u0327":"O","U\u0300":"U","U\u0301":"U","U\u0302":"U","U\u0308":"U","Y\u0301":"Y","a\u0300":"a","a\u0301":"a","a\u0302":"a","a\u0303":"a","a\u0308":"a","a\u030a":"a","c\u0327":"c","e\u0300":"e","e\u0301":"e","e\u0302":"e","e\u0308":"e","i\u0300":"i","i\u0301":"i","i\u0302":"i","i\u0308":"i","n\u0303":"n","o\u0300":"o","o\u0302":"o","o\u0303":"o","o\u0308":"o","o\u0327":"o","u\u0300":"u","u\u0301":"u","u\u0302":"u","u\u0308":"u","y\u0301":"y","\u0104":"A","\u0106":"C","\u0118":"E","\u0141":"L","\u0143":"N","\xd3":"O","\u015a":"S","\u0179":"Z","\u017b":"Z","\u0105":"a","\u0107":"c","\u0119":"e","\u0142":"l","\u0144":"n","\xf3":"o","\u015b":"s","\u017a":"z","\u017c":"z"};return e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^\u0000-\u007F]/g,e=>t[e]||e).replace(/[:;#*()]/g,"").replace("^","").replace("%"," procent")}}}}]);